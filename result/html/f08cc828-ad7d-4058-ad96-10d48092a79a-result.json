{"name": "人物搜索", "status": "failed", "statusDetails": {"message": "AssertionError: assert 'https://img5...ca3c2.png@!bg' == ''\n  + https://img5.tianyancha.com/logo/jigou/31a4a5add9b2041cd875a605b8fca3c2.png@!bg", "trace": "self = <api_test.testcase.test_person.test_person.TestPerson object at 0x000001C1E7BCEC08>\ntest_data = {'cnt': 3, 'company_member_list': [{'company_id': 4341634041001490676, 'created_at': datetime.datetime(2023, 4, 26, 12, 27, 2), 'end_time': '', 'id': 4670550, ...}], 'data_id': 6380890963052264713, 'edu_cnt': 0, ...}\n\n    @allure.title('人物搜索')\n    @pytest.mark.parametrize('test_data', person_yaml_data)\n    def test_person_search(self, test_data):\n        result = p.person_search_v3(test_data['name'],'')\n        result_info = result['data']['items']\n        person_id = str(test_data['data_id'])\n        # 断言搜索结果与数据库保持一致\n        sql_person_cnt = f'select count(*) count from person where name like \"%{test_data[\"name\"]}%\" and `from` <> \"脉脉\" and data_id  in (select person_id from company_member)'\n        cnt = s.get_one_value(sql_person_cnt)\n        assert cnt == result['data']['cnt']\n        #断言人名与搜索相同或包\n        #断言搜索结果页人物按照公司规模倒叙\n        # if test_data['result_num_order']:\n        #     assert str(test_data['result_num_order']['company_id']) == result['data']['items'][0]['company_id']\n        # else:\n        #     print('只搜到1条人物数据，无需排序')\n        # 断言头像,有头像展示头像,无头像展示简称\n        person_detail = p.person_detail_v2(str(test_data['data_id']))\n        if test_data['person_list']:\n            if test_data['person_list']['avatar'] == '' or test_data['person_list']['avatar'] == '-':\n                assert person_detail['data']['basic']['logo'] == ''\n            else:\n>               assert test_data['person_list']['avatar'] == person_detail['data']['basic']['logo']\nE               AssertionError: assert 'https://img5...ca3c2.png@!bg' == ''\nE                 + https://img5.tianyancha.com/logo/jigou/31a4a5add9b2041cd875a605b8fca3c2.png@!bg\n\napi_test\\testcase\\test_person\\test_person.py:104: AssertionError"}, "parameters": [{"name": "test_data", "value": "{'cnt': 3, 'company_member_list': [{'company_id': 4341634041001490676, 'created_at': datetime.datetime(2023, 4, 26, 12, 27, 2), 'end_time': '', 'id': 4670550, 'is_delete': 0, 'job_status': 1, 'major_type': 0, 'organize_type': 0, 'person_from': 1, 'person_id': 6380890963052264713, 'pos_weight': 24, 'position': '董事', 'position_label_five': 0, 'position_label_four': 0, 'position_label_one': 1, 'position_label_six': 0, 'position_label_three': 0, 'position_label_two': 0, 'start_time': '', 'updated_at': datetime.datetime(2023, 4, 26, 12, 27, 2), 'useful_position': '19', 'useful_position_json': '[{\"id\": \"19\", \"name\": \"董事\"}]'}], 'data_id': 6380890963052264713, 'edu_cnt': 0, 'edu_list': (), 'introduction': '', 'is_linked': 1, 'member_cnt': 1, 'name': '周凌霏', 'person_list': {'avatar': 'https://img5.tianyancha.com/logo/jigou/31a4a5add9b2041cd875a605b8fca3c2.png@!bg', 'avatar_word': '周', 'created_at': datetime.datetime(2022, 10, 14, 10, 44, 41), 'data_id': 3816262450022925391, 'from': '爱企查', 'id': 1518241, 'introduction': '周凌霏女士在投资及金融领域拥有超过14年的行业经验。她曾是启明创投最年轻的合伙人，参与投资了马蜂窝、途虎养车、Musical.ly、洛天依、妙手医生、叮咚买菜等知名项目，也包括Veer这样的种子基金投资项目。\\n她还曾在通用电气资本上海及香港的风险管理团队、通用电气全球财务管理培训项目工作4年。\\n周凌霏女士拥有上海财经大学经济社会学学士学位、芝加哥大学布斯商学院MBA学位。她曾荣登创业邦2018年“40位40岁以下投资人”、36氪2019年“36位36岁以下了不起的投资人”的榜单。', 'is_delete': 0, 'is_linked': 1, 'name': '周凌霏', 'tags': '', 'updated_at': datetime.datetime(2023, 3, 16, 10, 22, 20), 'us3_introduction': 'bdAttr/a8cca0c96625006b805a38f74faca19b.txt'}, 'person_news_cnt': 0, 'result_num_order': {'company_id': 463553622262348712, 'insuranceNum': 217}, 'tags': ''}"}], "start": 1683690226682, "stop": 1683690229819, "uuid": "e90cbf71-1165-4456-8c67-deb5a14211fa", "historyId": "b78ebe022803562a181e817abae1f10d", "testCaseId": "acf86350f35b5e15fb16f8642522a326", "fullName": "api_test.testcase.test_person.test_person.TestPerson#test_person_search", "labels": [{"name": "feature", "value": "人物测试案例"}, {"name": "parentSuite", "value": "api_test.testcase.test_person"}, {"name": "suite", "value": "test_person"}, {"name": "subSuite", "value": "TestPerson"}, {"name": "host", "value": "DESKTOP-AR41KHM"}, {"name": "thread", "value": "31496-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "api_test.testcase.test_person.test_person"}]}