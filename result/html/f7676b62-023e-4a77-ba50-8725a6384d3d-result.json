{"name": "人物搜索", "status": "failed", "statusDetails": {"message": "AssertionError: assert 'https://i9.t...br2sjFxp-a160' == ''\n  + https://i9.taou.com/maimai/p/29522/8004_50_4dcQ49UZbr2sjFxp-a160", "trace": "self = <api_test.testcase.test_person.test_person.TestPerson object at 0x00000243713CBD88>\ntest_data = {'cnt': 34, 'company_member_list': [{'company_id': 1088140356108580301, 'created_at': datetime.datetime(2023, 4, 26, 1...4, 26, 11, 46, 27), 'end_time': '2019-02-01', 'id': 39840210, ...}], 'data_id': 5414914237151388174, 'edu_cnt': 1, ...}\n\n    @allure.title('人物搜索')\n    @pytest.mark.parametrize('test_data', person_yaml_data)\n    def test_person_search(self, test_data):\n        result = p.person_search_v3(test_data['name'],'')\n        result_info = result['data']['items']\n        person_id = str(test_data['data_id'])\n        # 断言搜索结果与数据库保持一致\n        sql_person_cnt = f'select count(*) count from person where name like \"%{test_data[\"name\"]}%\" and `from` <> \"脉脉\" and data_id  in (select person_id from company_member)'\n        cnt = s.get_one_value(sql_person_cnt)\n        assert cnt == result['data']['cnt']\n        #断言人名与搜索相同或包\n        #断言搜索结果页人物按照公司规模倒叙\n        # if test_data['result_num_order']:\n        #     assert str(test_data['result_num_order']['company_id']) == result['data']['items'][0]['company_id']\n        # else:\n        #     print('只搜到1条人物数据，无需排序')\n        # 断言头像,有头像展示头像,无头像展示简称\n        person_detail = p.person_detail_v2(str(test_data['data_id']))\n        if test_data['person_list']:\n            if test_data['person_list']['avatar'] == '' or test_data['person_list']['avatar'] == '-':\n>               assert person_detail['data']['basic']['logo'] == ''\nE               AssertionError: assert 'https://i9.t...br2sjFxp-a160' == ''\nE                 + https://i9.taou.com/maimai/p/29522/8004_50_4dcQ49UZbr2sjFxp-a160\n\napi_test\\testcase\\test_person\\test_person.py:102: AssertionError"}, "parameters": [{"name": "test_data", "value": "{'cnt': 34, 'company_member_list': [{'company_id': 1088140356108580301, 'created_at': datetime.datetime(2023, 4, 26, 11, 32), 'end_time': '', 'id': 39707383, 'is_delete': 0, 'job_status': 1, 'major_type': 0, 'organize_type': 0, 'person_from': 2, 'person_id': 5414914237151388174, 'pos_weight': 1000, 'position': '渠道拓展总监', 'position_label_five': 1, 'position_label_four': 0, 'position_label_one': 0, 'position_label_six': 0, 'position_label_three': 0, 'position_label_two': 0, 'start_time': '2019-08-01', 'updated_at': datetime.datetime(2023, 4, 26, 11, 32), 'useful_position': '40', 'useful_position_json': '[{\"id\": \"40\", \"name\": \"渠道拓展总监\"}]'}, {'company_id': 3395105032386814907, 'created_at': datetime.datetime(2023, 4, 26, 12, 10, 49), 'end_time': '2018-05-01', 'id': 39730296, 'is_delete': 0, 'job_status': 2, 'major_type': 0, 'organize_type': 0, 'person_from': 2, 'person_id': 5414914237151388174, 'pos_weight': 14, 'position': '联合创始人', 'position_label_five': 0, 'position_label_four': 0, 'position_label_one': 1, 'position_label_six': 0, 'position_label_three': 0, 'position_label_two': 0, 'start_time': '2018-05-01', 'updated_at': datetime.datetime(2023, 4, 26, 12, 10, 49), 'useful_position': '10003', 'useful_position_json': '[{\"id\": \"10003\", \"name\": \"联合创始人\"}]'}, {'company_id': 285361324443698189, 'created_at': datetime.datetime(2023, 4, 26, 12, 2, 50), 'end_time': '', 'id': 39805383, 'is_delete': 0, 'job_status': 1, 'major_type': 0, 'organize_type': 0, 'person_from': 2, 'person_id': 5414914237151388174, 'pos_weight': 35, 'position': '增值服务总监', 'position_label_five': 1, 'position_label_four': 0, 'position_label_one': 0, 'position_label_six': 1, 'position_label_three': 0, 'position_label_two': 0, 'start_time': '2021-03-01', 'updated_at': datetime.datetime(2023, 4, 26, 12, 2, 50), 'useful_position': '28,40', 'useful_position_json': '[{\"id\": \"28\", \"name\": \"服务总监\"}, {\"id\": \"40\", \"name\": \"增值服务\"}]'}, {'company_id': 1143334750980738485, 'created_at': datetime.datetime(2023, 4, 26, 11, 33, 45), 'end_time': '2017-02-01', 'id': 39818565, 'is_delete': 0, 'job_status': 2, 'major_type': 0, 'organize_type': 0, 'person_from': 2, 'person_id': 5414914237151388174, 'pos_weight': 1000, 'position': '商务合作总监', 'position_label_five': 1, 'position_label_four': 0, 'position_label_one': 0, 'position_label_six': 0, 'position_label_three': 0, 'position_label_two': 0, 'start_time': '2017-02-01', 'updated_at': datetime.datetime(2023, 4, 26, 11, 33, 45), 'useful_position': '40', 'useful_position_json': '[{\"id\": \"40\", \"name\": \"商务合作总监\"}]'}, {'company_id': 1868659635555888545, 'created_at': datetime.datetime(2023, 4, 26, 11, 46, 27), 'end_time': '2019-02-01', 'id': 39840210, 'is_delete': 0, 'job_status': 2, 'major_type': 0, 'organize_type': 0, 'person_from': 2, 'person_id': 5414914237151388174, 'pos_weight': 35, 'position': '高级商务总监', 'position_label_five': 0, 'position_label_four': 0, 'position_label_one': 0, 'position_label_six': 1, 'position_label_three': 0, 'position_label_two': 0, 'start_time': '2019-02-01', 'updated_at': datetime.datetime(2023, 4, 26, 11, 46, 27), 'useful_position': '28', 'useful_position_json': '[{\"id\": \"28\", \"name\": \"高级商务总监\"}]'}], 'data_id': 5414914237151388174, 'edu_cnt': 1, 'edu_list': [{'created_at': datetime.datetime(2023, 2, 15, 19, 42, 14), 'degree': '1', 'end_time': '2008-11', 'id': 313666, 'person_id': 5414914237151388174, 'professional': '会计和信息管理', 'school_name': 'the university of auckland', 'school_url': '', 'start_time': '2006-6', 'updated_at': datetime.datetime(2023, 2, 15, 19, 42, 14)}], 'introduction': '奥园健康生活（广州）集团有限公司增值服务总监', 'is_linked': 1, 'member_cnt': 5, 'name': '姚望', 'person_list': {'avatar': '', 'avatar_word': '姚', 'created_at': datetime.datetime(2022, 10, 14, 10, 43, 30), 'data_id': 6646539182010645948, 'from': '爱企查', 'id': 118099, 'introduction': '', 'is_delete': 0, 'is_linked': 1, 'name': '姚望', 'tags': '', 'updated_at': datetime.datetime(2022, 10, 14, 10, 43, 30), 'us3_introduction': ''}, 'person_news_cnt': 0, 'result_num_order': {'company_id': 7917241283866357737, 'insuranceNum': 2078}, 'tags': 'CEO/创始人/企业高管'}"}], "start": 1683604309814, "stop": 1683604313024, "uuid": "3fe626ec-bce7-4c8a-8f28-661fd90509b5", "historyId": "ed12f209f80a03d65cdc46d09d1a1949", "testCaseId": "acf86350f35b5e15fb16f8642522a326", "fullName": "api_test.testcase.test_person.test_person.TestPerson#test_person_search", "labels": [{"name": "feature", "value": "人物测试案例"}, {"name": "parentSuite", "value": "api_test.testcase.test_person"}, {"name": "suite", "value": "test_person"}, {"name": "subSuite", "value": "TestPerson"}, {"name": "host", "value": "DESKTOP-AR41KHM"}, {"name": "thread", "value": "29684-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "api_test.testcase.test_person.test_person"}]}